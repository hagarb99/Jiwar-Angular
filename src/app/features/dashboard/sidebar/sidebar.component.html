<aside class="fixed left-0 top-20 w-64 bg-white border-r flex flex-col h-[calc(100vh-5rem)] z-40"
  *ngIf="currentUser$ | async as currentUser">
  <div class="p-6 text-center border-b">
    <div
      class="w-16 h-16 mx-auto rounded-full bg-slate-100 border-2 border-white shadow-lg overflow-hidden flex items-center justify-center text-xl shrink-0 group-hover:scale-105 transition-transform duration-300">
      <img *ngIf="currentUser.profilePicURL" [src]="getActionUrl(currentUser.profilePicURL)" alt="Profile"
        class="w-full h-full object-cover">
      <span *ngIf="!currentUser.profilePicURL" class="text-slate-600 font-bold text-2xl">{{ currentUser.name.charAt(0)
        || 'U' }}</span>
    </div>

    <h3 class="mt-3 font-bold">{{ currentUser.name }}</h3>
    <p class="text-xs text-gray-500">{{ currentUser.email }}</p>

    <span class="mt-2 inline-block px-3 py-1 text-xs rounded bg-amber-100 text-amber-700">
      {{ currentUser.role }}
    </span>
  </div>

  <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
    <a *ngFor="let item of getMenuItemsForRole(currentUser.role)" [routerLink]="item.path"
      routerLinkActive="active-link"
      class="sidebar-link flex items-center px-4 py-3 rounded-xl transition-all duration-200 group">
      <svg class="w-5 h-5 mr-3 transition-colors duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path [attr.d]="item.icon" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
      <span class="font-medium">{{ item.label }}</span>
    </a>
  </nav>

  <div class="p-4 border-t">
    <button (click)="logout()" class="w-full text-left text-red-600">
      Sign Out
    </button>
  </div>
</aside>